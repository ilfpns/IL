### **프로세스 구조**
[[OS]]
---

- 모든 프로세스는 4GB의 공간을 할당 받는다
- Code, Data, Stack, Heap 으로 구성된 사용자 영역 0GB ~ 3GB까지의 공간을 받는다
- OS 커널 영역이 나머지 3GB ~ 4GB

![[Pasted image 20260210000717.png]]

- Code

⇒ 프로그램을 실행시키는 실행 파일 명령어 (실제 코드)

- Data

⇒ const, static, 초기화 데이터가 저장되는 공간

- Stack

⇒ 임시 데이터를 저장

- Heap

⇒ 코드에서 동적으로 만들어지는 데이터 저장 공간

### PC (Program Counter) 레지스터 + SP (Stack Pointer) 레지스터

---

- PC : 다음 실행할 코드 주소를 저장하고 있는 레지스터
- SP : 스택의 최상단 주소를 저장하고 있는 레지스터

⇒ 프로세스가 실행되며 PC와 SP의 주소가 변한다

이를 통해 현재 실행 중인 함수 및 다음에 실행할 함수를 알 수 있다

### Context Switching

---

- CPU에 실행할 프로세스를 교체하는 기술
- PID, PC, SP 메모리 주소를 이용해 프로세스 저장 상태를 기반으로 실행할 수 있다

### Process Control Black

⇒ 프로세스가 실행중인 상태를 갭쳐 / 구조화해서 저장

- Process State
- Program Counter
- CPU registers
- CPU scheduling info
- Memory-management info
- Accountign info
- I/O statues info

### Multi Thread & Multi process

- Process ↔ Process 접근 불가

⇒ 다른 메모리 영역에 잡히므로, 접근 불가

⇒ 이 방법을 해결하기 위해 IPC가 고안됨

⇒ IPC 기법은 프로세스 안에 존재하는 커널 공간을 사용한다

- Thread ↔ Thread

⇒ 스레드는 코드 레벨에서 서로 접근할 수 있지만

### Thread

⇒ 프로세스 내에서 이뤄지는 작업 흐름 수행 단위

- 프로세스 자원을 공유한다
- 모든 프로세스는 1개 이상의 스레드를 가지고, 두 개 이상의 스레드를 가지면 멀티 스레드라고 한다

### **Multi Thread**

- 동시성(Concurrency)과 병렬성(Parallelism)

![[Pasted image 20260210000702.png]]

프로세스는 동시적, 병렬적, 혹은 이 둘이 혼합된 방식으로 작종한다

- 싱글 코어의 경우
    - 멀티 스레드를 통해 동시성을 높일 수 있다
    - Switching context를 통해 동시에 실행되는 것 처럼 보이는 것을 동시성이라 한다
- 멀티 코어의 경우
    - 멀티 스레드 병렬성을 높일 수 있다
    - 동시에 작업을 수행하는 것을 병렬성이라 한다

**장점**

1. 응답성 : A스레드가 도는 동안, B스레드도 사용자의 요청을 처리할 수 있어 응답성이 향상한다
2. 자원 공유 : 한 프로세스 안에 자원을 공유하기 때문에 자원을 공유하기 좋다
3. 경제성 : 프로세스의 메모리를 사용하기 때문에 통신 비용이 적다
4. 확장성 : 스레드가 다른 프로세스에서 병렬로 수행될 수 있다

**단점**

1. 성능 저하 : 싱글 코어의 경우 많은 스레드는 Context switching이 많이 일어나 성능이 저하될 수 있다
2. 전파 : 스레드 하나에 문제가 생기면 프로세스에 영향을 미칠 수 있다
3. 동기화 : 스레드는 프로세스의 Cord, Data, Heap 영역을 공유한다 그러므로 공유 자원에 동시 접근 시 오류가 생길 수 있다

### 공유 자원

- 임계 자원 : 동시에 읽고 쓰게 되는 데이터
- 임계 영역 : 동시에 읽고 쓰는 코드 영역

**상호 배제 알고리즘**

1. Semaphore
    - 임계 구역에 여러 스레드가 접근 가능
    - counter를 기준으로 동시에 자원에 접근할 수 있는 허용 가능 스레드 수를 제어함
2. Mutex
    - 임계 구역에는 하나의 스레드만 접근 가능