> **Copy On Write**
[[OS]]
---

⇒ 프로세스 fork를 할 때 자식 프로세스는 부모의 데이터를 복사해야한다

하지만 이는 너무 많은 overhead를 일으킨다, 그렇다고 메모리를 공유하면 독립적 동작을 막는다

⇒ 메모리는 적게 사용하고, 독립적 움직임을 하기 위해서 COW를 사용한다

- 자식 프로세스를 생성하면 부모 프로세스의 주소 공간을 공유한다
- 그 후 자식에게 독립된 page table(데이터가 담김)을 만들어준다

1. 부모는 자식과 같은 physical page를 가르킨다, 해당 page는 read-only다
    
2. 부모 또는 자식 프로세스가 write를 시도하면, 그 때 page를 초기하고 복사해서 메모리에 올린다
    
    - 초기화?
        
        ⇒ 보안 이슈
        
        ⇒ 자식 프로세스의 page를 보고 부모 프로세스가 어디 접근했는지 알 수 있다
        
        ⇒ zero-fill-on-demand-page 이라고 불린다
        
3. 자식은 해당 page에 write를 할 수 있고, 사용할 수 있다
    

⇒ 바로 복사하는 것과 달리 필요한 것만 하므로 메모리 절약

⇒ 결국 자식도 부모와 같은 physical table을 가르키므로 read는 언제나 가능, write는 할때만 복사해서 사용