> **Read Copy Update**
[[Kernel]] [[C]]
---

⇒ 읽기는 락 없이, 쓰는 쪽은 비용을 지불하는 커널 전용 동시성 메커니즘

⇒ 읽기 경로에서 포인터를 안전하게 바꾸는 기술

1. 읽기
    - 락을 쓰지 않는다
    - 읽는 쪽은 거의 비용이 들지 않는다
2. 쓰기
    - 복사 후 교체된다
    - 새 데이터를 만들어서 포인터만 바꿔준다
3. 회수
    - 읽기가 종료되고 옛 데이터를 정리한다

### 실행 단계

1. 새 객체 할당 (copy)
2. 포인터 교체
3. 옛 객체 지연 해제

```cpp
1. Read가 데이터 읽기 시작 (OLD 데이터)
2. Write가 새 데이터 복사 (NEW 데이터)
3. 포인터를 OLD → NEW로 교체
4. Write가 “Read가 다 끝날 때까지 기다림”
5. Read는 그냥 지나감 (unlock)
6. Write가 OLD 데이터 버림
```