## **Encapsulation**
[[Network]]
⇒ 상위 계층의 데이터에 하위 계층의 제어 정보 (헤더)를 덧붙여 전송 가능한 패킷 단위로 포장하는 과정

![[Pasted image 20260301192118.png]]

- 다음 계층으로 넘어가며, 하위 게층을 설명하는 헤더를 붙임
    
- DataLink 계층에서 트레일러 정보가 생김
    
    - 트레일러 : 데이터를 전달할 때 데이터의 마지막에 추가하는 정보
- **Flow**
    
    1. [응용] : 데이터를 [표현]에 전송
    2. [표현] : 받은 데이터를 [세션]에 전송, 이 때 [표현]의 헤더를 담음
    3. [세션] : 받은 데이터를 [전송]에 전송, 이 때 [세션]의 헤더를 담음
- **왜 헤더를 추가할까?**
    
    ⇒ 복잡한 전송 과정에서 데이터를 잃어버리지 않고, 정확하게 도착시키기 위해
    
    - 주소 정보
    - 프로토콜 식별
    - 데이터 도착 순서 제어
- **왜 트레일러를 추가할까?**
    
    ⇒ 무결성 검사
    
    - FCS
        
        송신측이 데이터 전체를 계산해 얻은 특수 결과 값을 트레일러에 담아 같이 전송함
        

## **Decapsulation**

⇒ 수신 측에서는 헤더를 제거함

⇒ 캡슐화와 반대로 데이터 링크 계층부터 순서대로 상위 계층으로 전달함

### 왜 역캡슐화를 진행할까?

⇒ 헤더를 하나씩 제거하며 올바른 데이터를 찾음 (송신측이 보낸 정확한 데이터)

- **Flow**
    
    - 방향 : 하위 → 상위
    
    1. 1계층 (Physical): 들어온 전기 신호를 0과 1의 비트 데이터로 변환한다.
    2. 2계층 (Data Link): 목적지 MAC 주소를 확인하고 FCS로 데이터 오류 여부를 검출한 뒤 헤더와 트레일러를 제거한다.
    3. 3계층 (Network): 목적지 IP 주소가 자신의 주소와 일치하는지 확인한 뒤 IP 헤더를 제거한다.
    4. 4계층 (Transport): 포트 번호를 확인하여 상위 프로세스를 지정하고, 시퀀스 번호로 순서를 제어한 뒤 전송 헤더를 제거한다.
    5. 5계층 (Session): 데이터 전송 단위(메시지)를 확인하고 통신 세션의 동기화 상태를 점검한 뒤 세션 헤더를 제거한다.
    6. 6계층 (Presentation): 인코딩 방식, 암호화 해제, 엔디안 변환을 통해 데이터 형식을 일치시킨 뒤 표현 헤더를 제거한다.
    7. 7계층 (Application): 최종적으로 남은 데이터(L7 PDU)를 응용 프로그램의 프로토콜(HTTP 등)에 맞게 처리한다.