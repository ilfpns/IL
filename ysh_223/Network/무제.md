## MAC Layer

<aside>

사전 정보

---

1. OSI 7계층 중 2계층에 속하는 개념이다
2. IEEE 802는 “세계 통신 규약”이다 </aside>

![[Pasted image 20260224192525.png]]

- LAN 환경에서는 (a)와 같은 데이터 링크의 계층을 LLC 계층과 MAC 계층으로 나누어 처리한다
    - DataLink Layer : 데이터를 보관하며, 다음 목적지에 쉽게 배달할 수 있도록 데이터를 프레임 (데이터 + 이정표) 단위로 만듦
    - LAN 계층 : 컴퓨터 내부의 데이터가 물리적인 전파로 변해서 이동하는 구간 전체를 의미함

### LCC Layer

⇒ 데이터 링크 계층의 기본 기능을 주로 다룬다

> > 어떤 상위 프로토콜에게 데이터를 줄 것인지 결정함 (SW)

- 이더넷 LLC와 토큰 링 LLC는 차이점이 존재함
    - 이더넷 LCC : 프레임을 전송하는 과정에서 슬라이딩 윈도우 프로토콜을 사용한다
        
        **Sliding Window Protocol** ⇒ 데이터 통신 흐름 제어 기법
        
        **특징**
        
        - 송수신자 각각 윈도우 버퍼를 가짐
        
        **Flow**
        
        1. 송신자는 윈도우 패킷만큼 데이터 전송, 패킷에 순서 번호 부여
        2. 수신자는 패킷을 받아 순서 번호에 따라 저장, 작은 순서 번호부터 상위 계층으로 전달, 송신자에게 ACK (긍정) 전송
        3. 송신자는 ACK를 받으면 윈도우를 오른쪽으로 이동시켜 새로운 패킷 전송
            1. ACK가 오지 않는다면 일정 시간 이후 다시 재전송
        4. 수신자는 자신의 윈도우를 왼쪽으로 이동하여 상위 계층으로 전달할 수 있는 패킷을 찾는다
            1. 패킷을 순서대로 받지 못한다면 NAK를 보내어 재전송 요청
        
        ```c
        송신부:    [0  1]  2  3  4  5  6 
        수신부:    0 [1  2]  3  4  5  6
        
        // 수신부 : "0" 받음, ACK 전달, 슬라이딩
        // 수신부가 데이터를 받고 ACK를 전송 후 슬라이딩, 
        // ACK를 받은 송신부 슬라이딩
        ```
        
    - 토큰 링 LCC : 송신 호스트가 수신 호스트의 도움 없이, 전송 프레임의 전송 오류를 검출 및 재전송이 가능해 슬라이딩 윈도우 프로토콜이 필요하지 않다
        

### MAC Layer

⇒ 물리적인 전송 선로의 특징과 매체 간의 연결 방식에 따른 제어 부분을 처리한다

> > 통신 매체를 누가 언제 쓸지에 대한 제어를 함 (HW)

- 전송 선로의 물리적인 특성을 반영하므로 LAN의 종류에 따라 특성이 구분된다
    
    ⇒ LAN 환경을 위한 MAC 계층은 종류가 다양하다
    
    ---
    
    - 이더넷 : 공유 버스를 이용해 호스트를 연결한다
        
        다음과 같이 여러 호스트가 한 버스에 연결되어 있는 구조를 의미함
        
        ![[Pasted image 20260224192547.png]]
        
        1. 데이터를 전송하기 전에 버스 사용 여부를 먼저 확인한다
        2. 버스를 사용한다면, 나중에 다시 시도하고, 그렇지 않다면 데이터 전송
        3. 둘 이상의 호스트에서 데이터 프레임을 전송 시도하면 충돌이 발생한다, 이는 일정 시간을 기다리고 재전송한다 (예전 방식)
    - 토큰 링 : 토큰이라 불리는 특정 패턴의 제어 데이터가 링을 순환한다
        
        ![[Pasted image 20260224192603.png]]
        
        - 데이터 프레임을 전송하려면 먼저 토큰을 확보해야 하며, 전송을 완료하자마자 토큰을 링에 내놓아야 한다
        - 각 호스테에 전송 우선순위를 부여할 수 있다
        - 시계 or 반시계 반양으로만 데이터를 전송할 수 있다
        
        ---
        
        1. 토큰은 링을 돌며 대기함
        2. 호스트는 토큰을 얻어 데이터를 전송함
        
        - 시나리오
            
            `1→2→3→4` : 3에서 2로 데이터를 보낼 때
            
            1. 4에서 확인, 넘김
            2. 1에서 확인, 넘김
            3. 2에서 확인, 수락
            
            ⇒ 1, 4를 거쳐감
            

## IEEE 802

![[Pasted image 20260224192634.png]]

### CSMA/CD

⇒ 한 공유버스 안에서 충돌을 방지하는 데에 쓰이는 방식

- Carrier Sense : 캐리어 감지 (현재 다른 호스트가 버스를 사용하는지 감지)
- Multiple Access : 다중 접속 (하나의 공유버스에 여러 호스트가 연결됨)
- Collision Detection : 충동 감지 (충돌을 알아채고 전송 정지)

### Token Bus

⇒ 이더넷 버스 위에서 토큰 링 규칙으로 대화하는 방식

### Token Ring

⇒ 하나의 공유버스에서 토큰을 가지고 대화하는 방식